RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# ----------------------------------------------------------------------
Options +FollowSymLinks
#RewriteBase /
# ----------------------------------------------------------------------
# Default page
# ----------------------------------------------------------------------
DirectoryIndex index.php?view=inicio
# ----------------------------------------------------------------------
# | Custom error messages/pages                                        |
# ----------------------------------------------------------------------
ErrorDocument 404 /error-404
ErrorDocument 500 /error-500
ErrorDocument 502 /error-502
ErrorDocument 504 /error-504
# ----------------------------------------------------------------------
# Rewrite rules
# ----------------------------------------------------------------------
RewriteRule ^(es|en)$ index.php?view=inicio&lang=$1 [NC,L]

RewriteRule ^nosotros(?:/(es|en))?$ index.php?view=nosotros&lang=$1 [NC,L]
RewriteRule ^contactanos(?:/(es|en))?$ index.php?view=contacto&lang=$1 [NC,L]

RewriteRule ^productos(?:/(es|en))?$ index.php?view=productos&lang=$1 [NC,L]
RewriteRule ^producto-detalle/([0-9]+)(?:/(es|en))?$ index.php?view=productoDetalle&id_product=$1&lang=$2 [NC,L]

RewriteRule ^aviso-de-privacidad(?:/(es|en))?$ index.php?view=avisoDePrivacidad&lang=$1 [NC,L]

RewriteRule ^pdf-1$ index.php?view=pdf1 [NC,L]

RewriteRule ^iniciar-sesion$ 76524894_admin/index.php?view=home [NC,L]
RewriteRule ^recuperar-contrasena$ 76524894_admin/index.php?view=recoverPassword [NC,L]

RewriteRule ^dashboard$ index.php?view=dashboard [NC,L]
RewriteRule ^ajustes$ index.php?view=ajustes [NC,L]
RewriteRule ^registrate$ index.php?view=registrate [NC,L]

RewriteRule ^u-([a-zA-Z0-9_-]+)?$ index.php?view=miPerfil&username_website=$1 [NC,L]
RewriteRule ^u-([a-zA-Z0-9_-]+)/Es$ index.php?view=miPerfil&username_website=$1&lang=Es [NC,L]
RewriteRule ^u-([[a-zA-Z0-9_-]+)/En$ index.php?view=miPerfil&username_website=$1&lang=En [NC,L]

RewriteRule ^blogs(?:/(es|en))?$ index.php?view=blogs&lang=$1 [NC,L]

RewriteRule ^(blog/)([a-zA-Z0-9_-]+)$ index.php?view=blogDetalle&page=$1&friendly=$2 [NC,L]
RewriteRule ^(blog/)([a-zA-Z0-9_-]+)/Es$ index.php?view=blogDetalle&page=$1&friendly=$2&lang=Es [NC,L]
RewriteRule ^(blog/)([a-zA-Z0-9_-]+)/En$ index.php?view=blogDetalle&page=$1&friendly=$2&lang=En [NC,L]

RewriteRule ^(blog/)([a-zA-Z0-9_-]+)/preview$ index.php?view=blogDetalle&page=$1&friendly=$2&preview=1 [NC,L]
RewriteRule ^(blog/)([a-zA-Z0-9_-]+)/preview/Es$ index.php?view=blogDetalle&page=$1&friendly=$2&preview=1&lang=Es [NC,L]
RewriteRule ^(blog/)([a-zA-Z0-9_-]+)/preview/En$ index.php?view=blogDetalle&page=$1&friendly=$2&preview=1&lang=En [NC,L]

RewriteRule ^buscador$ index.php?view=buscador [NC,L]
RewriteRule ^buscador/Es$ index.php?view=buscador&lang=Es [NC,L]
RewriteRule ^buscador/En$ index.php?view=buscador&lang=En [NC,L]

RewriteRule ^chat$ index.php?view=chat [NC,L]
RewriteRule ^chat/([0-9]*)$ index.php?view=chatDetail&id_user=$1 [NC,L]

RewriteRule ^mail-autorespuesta$ index.php?view=mailAutorespuesta [NC,L]
RewriteRule ^mail-usuario-nuevo$ index.php?view=mailUsuarioNuevo [NC,L]
RewriteRule ^mail-solicitud-menu-usuario$ index.php?view=mailSolicitudMenuUsuario [NC,L]
RewriteRule ^mail-nueva-solicitud-informar-chefs-menu-usuario$ index.php?view=mailNuevaSolicitudInformarChefsMenuUsuario [NC,L]
RewriteRule ^mail-nueva-propuesta-menu-usuario$ index.php?view=mailNuevaPropuestaMenuUsuario [NC,L]
RewriteRule ^mail-solicitud-cancelada-informar-chefs-menu-usuario$ index.php?view=mailSolicitudCanceladaInformarChefsMenuUsuario [NC,L]
RewriteRule ^mail-propuesta-reservada-chef$ index.php?view=mailPropuestaReservadaChef [NC,L]
RewriteRule ^mail-propuesta-reservada-comensal$ index.php?view=mailPropuestaReservadaComensal [NC,L]
RewriteRule ^mail-propuesta-cerrada$ index.php?view=mailPropuestaCerrada [NC,L]
RewriteRule ^mail-total-de-propuestas-menu-usuario$ index.php?view=mailTotalDePropuestasMenuUsuario [NC,L]
RewriteRule ^mail-reserva-prioritaria-menu-usuario$ index.php?view=mailReservaPrioritariaMenuUsuario [NC,L]
RewriteRule ^mail-propuesta-expiro-menu-usuario$ index.php?view=mailPropuestaExpiroMenuUsuario [NC,L]
RewriteRule ^mail-promocion$ index.php?view=mailPromocion [NC,L]

RewriteRule ^error-(404|500|502|504)(?:/(es|en))?$ index.php?view=error$1&lang=$2 [NC,L]
# ----------------------------------------------------------------------
# SELECT
# ----------------------------------------------------------------------
RewriteRule ^s-lo-in-f$ core/code/s/sLoInF.php [NC,L]
RewriteRule ^s-off-f$ core/code/sOffF.php [NC,L]
RewriteRule ^all-conversatins-cht-u-f$ core/code/chat/s/allConversatinsChtUF.php [NC,L]
RewriteRule ^gt-message-cht-u-f$ core/code/chat/s/getMessageChtUF.php [NC,L]
RewriteRule ^lst-notifiction-cht-u-f$ core/code/chat/s/lstNotifictionChtUF.php [NC,L]
# ----------------------------------------------------------------------
# SEARCH
# ----------------------------------------------------------------------
RewriteRule ^searh-chat-u-by-name-u-f$ core/code/chat/s/searchChatUserByNameUserF.php [NC,L]
# ----------------------------------------------------------------------
# UPDATE
# ----------------------------------------------------------------------
RewriteRule ^upd-inf-u-f$ core/code/user/upd/updInfUF.php [NC,L]
RewriteRule ^upd-ema-u-f$ core/code/user/upd/updEmaUF.php [NC,L]
RewriteRule ^upd-psw-u-f$ core/code/user/upd/updPswUF.php [NC,L]
RewriteRule ^upd-lst-seen-cht-u-f$ core/code/chat/upd/updLstSeenChtUF.php [NC,L]
RewriteRule ^upd-blck-conversatins-f$ core/code/chat/upd/updBlckConversatinsF.php [NC,L]
# ----------------------------------------------------------------------
# REGISTER
# ----------------------------------------------------------------------
RewriteRule ^new-reg-msg-cht-u-f$ core/code/chat/r/newRegMsgChtUF.php [NC,L]
RewriteRule ^new-reg-g-u-f$ core/code/user/r/newRegGenralUF.php [NC,L]
RewriteRule ^new-reg-s-u-f$ core/code/user/r/newRegSpecficUF.php [NC,L]
RewriteRule ^new-reg-d-m-f$ core/code/diner-menu/r/newRegDMnuF.php [NC,L]
RewriteRule ^new-reg-d-m-c-f$ core/code/diner-menu/r/newRegDMnuCncelF.php [NC,L]
RewriteRule ^new-reg-c-m-p-c-f$ core/code/diner-menu/r/newRegChfMnuPropsalCncelF.php [NC,L]
RewriteRule ^new-reg-r-f$ core/code/diner-menu/r/newRegReservtionF.php [NC,L]
# ----------------------------------------------------------------------
# UPLOAD
# ----------------------------------------------------------------------
RewriteRule ^upl-u-pro-pi-f$ core/code/user/upl/uplUProPiF.php [NC,L]
RewriteRule ^upl-summernote-image$ core/code/image/upl/uplSummernoteImage.php [NC,L]
# ----------------------------------------------------------------------
# DELETE
# ----------------------------------------------------------------------
RewriteRule ^d-all-messages-cht-by-u-f$ core/code/chat/d/dAllMessagesChtByUF.php [NC,L]
# ----------------------------------------------------------------------
# | Cross-origin images                                                |
# ----------------------------------------------------------------------

# Send the CORS header for images when browsers request it.
#
# https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image
# https://blog.chromium.org/2011/07/using-cross-domain-images-in-webgl-and.html

<IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
        <FilesMatch "\.(bmp|cur|gif|ico|jpe?g|png|svgz?|webp)$">
            SetEnvIf Origin ":" IS_CORS
            Header set Access-Control-Allow-Origin "*" env=IS_CORS
        </FilesMatch>
    </IfModule>
</IfModule>

# ----------------------------------------------------------------------
# | Cross-origin web fonts                                             |
# ----------------------------------------------------------------------

# Allow cross-origin access to web fonts.
#
# https://developers.google.com/fonts/docs/troubleshooting

<IfModule mod_headers.c>
    <FilesMatch "\.(eot|otf|tt[cf]|woff2?)$">
        Header set Access-Control-Allow-Origin "*"
    </FilesMatch>
</IfModule>
# ----------------------------------------------------------------------
# | Media types                                                        |
# ----------------------------------------------------------------------

# Serve resources with the proper media types (f.k.a. MIME types).
#
# https://www.iana.org/assignments/media-types/media-types.xhtml
# https://httpd.apache.org/docs/current/mod/mod_mime.html#addtype

<IfModule mod_mime.c>

  # Data interchange

    AddType application/atom+xml                        atom
    AddType application/json                            json map topojson
    AddType application/ld+json                         jsonld
    AddType application/rss+xml                         rss
    AddType application/geo+json                        geojson
    AddType application/rdf+xml                         rdf
    AddType application/xml                             xml


  # JavaScript

    # Servers should use text/javascript for JavaScript resources.
    # https://html.spec.whatwg.org/multipage/scripting.html#scriptingLanguages

    AddType text/javascript                             js mjs


  # Manifest files

    AddType application/manifest+json                   webmanifest
    AddType application/x-web-app-manifest+json         webapp
    AddType text/cache-manifest                         appcache


  # Media files

    AddType audio/mp4                                   f4a f4b m4a
    AddType audio/ogg                                   oga ogg opus
    AddType image/bmp                                   bmp
    AddType image/svg+xml                               svg svgz
    AddType image/webp                                  webp
    AddType video/mp4                                   f4v f4p m4v mp4
    AddType video/ogg                                   ogv
    AddType video/webm                                  webm
    AddType video/x-flv                                 flv

    # Serving `.ico` image files with a different media type
    # prevents Internet Explorer from displaying them as images:
    # https://github.com/h5bp/html5-boilerplate/commit/37b5fec090d00f38de64b591bcddcb205aadf8ee

    AddType image/x-icon                                cur ico


  # WebAssembly

    AddType application/wasm                            wasm


  # Web fonts

    AddType font/woff                                   woff
    AddType font/woff2                                  woff2
    AddType application/vnd.ms-fontobject               eot
    AddType font/ttf                                    ttf
    AddType font/collection                             ttc
    AddType font/otf                                    otf


  # Other

    AddType application/octet-stream                    safariextz
    AddType application/x-bb-appworld                   bbaw
    AddType application/x-chrome-extension              crx
    AddType application/x-opera-extension               oex
    AddType application/x-xpinstall                     xpi
    AddType text/calendar                               ics
    AddType text/markdown                               markdown md
    AddType text/vcard                                  vcard vcf
    AddType text/vnd.rim.location.xloc                  xloc
    AddType text/vtt                                    vtt
    AddType text/x-component                            htc

</IfModule>
# ----------------------------------------------------------------------
# | Character encodings                                                |
# ----------------------------------------------------------------------

# Serve all resources labeled as `text/html` or `text/plain`
# with the media type `charset` parameter set to `UTF-8`.
#
# https://httpd.apache.org/docs/current/mod/core.html#adddefaultcharset

AddDefaultCharset utf-8
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

# Serve the following file types with the media type `charset`
# parameter set to `UTF-8`.
#
# https://httpd.apache.org/docs/current/mod/mod_mime.html#addcharset

<IfModule mod_mime.c>
    AddCharset utf-8 .appcache \
                     .bbaw \
                     .css \
                     .htc \
                     .ics \
                     .js \
                     .json \
                     .manifest \
                     .map \
                     .markdown \
                     .md \
                     .mjs \
                     .topojson \
                     .vtt \
                     .vcard \
                     .vcf \
                     .webmanifest \
                     .xloc
</IfModule>
# ----------------------------------------------------------------------
# | Cache expiration                                                   |
# ----------------------------------------------------------------------
# Serve resources with far-future expiration date.
#
# (!) If you don't control versioning with filename-based
# cache busting, you should consider lowering the cache times
# to something like one week.
#
# https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control
# https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Expires
# https://httpd.apache.org/docs/current/mod/mod_expires.html

<IfModule mod_expires.c>

    ExpiresActive on
    ExpiresDefault                                      "access plus 1 month"

  # CSS

    ExpiresByType text/css                              "access plus 1 month"

  # Data interchange

    ExpiresByType application/atom+xml                  "access plus 1 hour"
    ExpiresByType application/rdf+xml                   "access plus 1 hour"
    ExpiresByType application/rss+xml                   "access plus 1 hour"

    ExpiresByType application/json                      "access plus 0 seconds"
    ExpiresByType application/ld+json                   "access plus 0 seconds"
    ExpiresByType application/schema+json               "access plus 0 seconds"
    ExpiresByType application/geo+json                  "access plus 0 seconds"
    ExpiresByType application/xml                       "access plus 0 seconds"
    ExpiresByType text/calendar                         "access plus 0 seconds"
    ExpiresByType text/xml                              "access plus 0 seconds"

  # Favicon (cannot be renamed!) and cursor images

    ExpiresByType image/vnd.microsoft.icon              "access plus 1 week"
    ExpiresByType image/x-icon                          "access plus 1 week"

  # HTML

    ExpiresByType text/html                             "access plus 0 seconds"


  # JavaScript

    ExpiresByType application/javascript                "access plus 1 month"
    ExpiresByType application/x-javascript              "access plus 1 month"
    ExpiresByType text/javascript                       "access plus 1 month"

  # Images

    ExpiresByType image/jpeg                            "access plus 1 year"
    ExpiresByType image/gif                             "access plus 1 year"
    ExpiresByType image/png                             "access plus 1 year"
    ExpiresByType image/webp                            "access plus 1 year"
    ExpiresByType image/svg+xml                         "access plus 1 year"
    ExpiresByType image/x-icon                          "access plus 1 year"


  # Video
    ExpiresByType video/mp4                             "access plus 1 year"
    ExpiresByType video/mpeg                            "access plus 1 year"


  # Manifest files

    ExpiresByType application/manifest+json             "access plus 1 week"
    ExpiresByType application/x-web-app-manifest+json   "access plus 0 seconds"
    ExpiresByType text/cache-manifest                   "access plus 0 seconds"


  # Markdown

    ExpiresByType text/markdown                         "access plus 0 seconds"


  # Media files

    ExpiresByType audio/ogg                             "access plus 1 year"
    ExpiresByType image/bmp                             "access plus 1 year"
    ExpiresByType image/gif                             "access plus 1 year"
    ExpiresByType image/jpeg                            "access plus 1 year"
    ExpiresByType image/png                             "access plus 1 year"
    ExpiresByType image/svg+xml                         "access plus 1 year"
    ExpiresByType image/webp                            "access plus 1 year"
    ExpiresByType video/mp4                             "access plus 1 year"
    ExpiresByType video/ogg                             "access plus 1 year"
    ExpiresByType video/webm                            "access plus 1 year"


  # WebAssembly

    ExpiresByType application/wasm                      "access plus 1 year"


  # Web fonts

    # Collection
    ExpiresByType font/collection                       "access plus 1 year"

    # Embedded OpenType (EOT)
    ExpiresByType application/vnd.ms-fontobject         "access plus 1 year"
    ExpiresByType font/eot                              "access plus 1 year"

    # OpenType
    ExpiresByType font/opentype                         "access plus 1 year"
    ExpiresByType font/otf                              "access plus 1 year"

    # TrueType
    ExpiresByType application/x-font-ttf                "access plus 1 year"
    ExpiresByType font/ttf                              "access plus 1 year"

    # Web Open Font Format (WOFF) 1.0
    ExpiresByType application/font-woff                 "access plus 1 year"
    ExpiresByType application/x-font-woff               "access plus 1 year"
    ExpiresByType font/woff                             "access plus 1 year"

    # Web Open Font Format (WOFF) 2.0
    ExpiresByType application/font-woff2                "access plus 1 year"
    ExpiresByType font/woff2                            "access plus 1 year"


  # Other

    ExpiresByType application/pdf                       "access plus 1 month"
    ExpiresByType image/vnd.microsoft.icon              "access plus 1 year"
    ExpiresByType text/x-cross-domain-policy            "access plus 1 week"
    ExpiresByType application/x-shockwave-flash         "access plus 1 month"

</IfModule>
# ----------------------------------------------------------------------
# | GZip                                                                |
# ----------------------------------------------------------------------
<ifModule mod_gzip.c>
  mod_gzip_on Yes
  mod_gzip_dechunk Yes
  mod_gzip_item_include file .(html?|txt|css|js|php|pl)$
  mod_gzip_item_include handler ^cgi-script$
  mod_gzip_item_include mime ^text/.*
  mod_gzip_item_include mime ^application/x-javascript.*
  mod_gzip_item_exclude mime ^image/.*
  mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>
# ----------------------------------------------------------------------
# | text compression                                                    |
# ----------------------------------------------------------------------
<IfModule mod_deflate.c>
  # Compress HTML, CSS, JavaScript, Text, XML and fonts
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
  AddOutputFilterByType DEFLATE application/x-font
  AddOutputFilterByType DEFLATE application/x-font-opentype
  AddOutputFilterByType DEFLATE application/x-font-otf
  AddOutputFilterByType DEFLATE application/x-font-truetype
  AddOutputFilterByType DEFLATE application/x-font-ttf
  AddOutputFilterByType DEFLATE application/x-javascript
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE font/opentype
  AddOutputFilterByType DEFLATE font/otf
  AddOutputFilterByType DEFLATE font/ttf
  AddOutputFilterByType DEFLATE image/svg+xml
  AddOutputFilterByType DEFLATE image/x-icon
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/javascript
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/xml

  # Remove browser bugs (only needed for really old browsers)
  BrowserMatch ^Mozilla/4 gzip-only-text/html
  BrowserMatch ^Mozilla/4\.0[678] no-gzip
  BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
  Header append Vary User-Agent
</IfModule>